---
 - hosts: localhost
   connection: local
   gather_facts: true
   user: root
   pre_tasks:
    - include_vars: ~/ansible-AWS/roles/provision-webservers/tasks/webserver-vars/webservers.yml
   roles:
   - provision-webservers

 - hosts: localhost
   connection: local
   gather_facts: true
   user: root
   pre_tasks:
    - include_vars: ~/ansible-AWS/roles/provision-loadbalancer/tasks/loadbalancer-vars/loadbalancer.yml
   roles:
   - provision-loadbalancer

 - hosts: all
   connection: local
   user: root
   gather_facts: true
   tasks:
   - debug: msg="groups={{groups}}"
     run_once: true

 - hosts: all
   connection: local
   user: root
   gather_facts: true
   tasks:
   - debug: msg="ansible_play_batch={{ansible_play_batch}}"
     run_once: true

 - hosts: webservers
   gather_facts: true
   become: yes
   pre_tasks:
    - include_vars: ~/ansible-AWS/roles/provision-webservers/tasks/webserver-vars/webservers.yml
   roles:
   - nginx
